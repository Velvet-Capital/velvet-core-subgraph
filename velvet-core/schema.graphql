type PortfolioInfo @entity(immutable: true) {
  id: ID!
  portfolioData: PortfoliolInfo
  portfolioId: BigInt!
  name: String!
  symbol: String!
  owner: Bytes!
  accessController: Bytes!
  isPublicPortfolio: Boolean!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type PortfoliolInfo @entity {
  id: ID!
  portfolio: Bytes!
  tokenExclusionManager: Bytes!
  rebalancing: Bytes!
  owner: Bytes!
  assetManagementConfig: Bytes!
  feeModule: Bytes!
  vaultAddress: Bytes!
  gnosisModule: Bytes!
}

type PortfolioFactory @entity {
  id: ID!
  portfolioInfoList: [PortfoliolInfo!]! # This represents the PortfolioInfolList
  protocolConfig: Bytes!
  portfolioCreationPause: Boolean!
}

type Transfer @entity {
  id: ID!
  from: Bytes!
  to: Bytes!
  value: BigInt!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

# --- PORTFOLIO EVENTS ---

type PublicSwapEnabled @entity {
  id: ID!
  portfolio: Bytes!
  timestamp: BigInt!
  transactionHash: Bytes!
}

type Deposit @entity {
  id: ID!
  portfolio: Bytes!
  user: Bytes!
  mintedAmount: BigInt!
  userBalanceAfterDeposit: BigInt!
  timestamp: BigInt!
  transactionHash: Bytes!
}

type Withdrawal @entity {
  id: ID!
  user: Bytes!
  burnedAmount: BigInt!
  portfolio: Bytes!
  portfolioTokens: [Bytes!]!
  userBalanceAfterWithdrawal: BigInt!
  userWithdrawalAmounts: [BigInt!]!
  timestamp: BigInt!
  transactionHash: Bytes!
}

type UserDepositedAmount @entity {
  id: ID!
  depositedAmounts: [BigInt!]!
  portfolioTokens: [Bytes!]!
  timestamp: BigInt!
  transactionHash: Bytes!
}

# --- FEE MODULE EVENTS ---

type FeesToBeMinted @entity(immutable: true) {
  id: ID!
  assetManagementTreasury: Bytes!
  protocolTreasury: Bytes!
  protocolFeeAmount: BigInt!
  managerFeeAmount: BigInt!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type ManagementFeeCalculated @entity(immutable: true) {
  id: ID!
  protocolStreamingFeeAmount: BigInt!
  managementFeeAmount: BigInt!
  protocolFeeCutAmount: BigInt!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type EntryExitFeeCharged @entity(immutable: true) {
  id: ID!
  entryExitProtocolFeeAmount: BigInt!
  entryExitAssetManagerFeeAmount: BigInt!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

# --- ASSET MANAGEMENT CONFIG EVENTS ---

type TransferabilityUpdated @entity(immutable: true) {
  id: ID!
  transferable: Boolean!
  publicTransfers: Boolean!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type ChangedPortfolioToPublic @entity(immutable: true) {
  id: ID!
  isPublic: Boolean!
  isTransferableToPublic: Boolean!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type MinPortfolioTokenHoldingAmountUpdated @entity(immutable: true) {
  id: ID!
  minPortfolioTokenHoldingAmount: BigInt!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type InitialPortfolioAmountUpdated @entity(immutable: true) {
  id: ID!
  newInitialPortfolioAmount: BigInt!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

# FeeManagement events
type ProposeManagementFee @entity(immutable: true) {
  id: ID!
  newManagementFee: BigInt!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type ProposePerformanceFee @entity(immutable: true) {
  id: ID!
  newPerformanceFee: BigInt!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type ProposeEntryAndExitFee @entity(immutable: true) {
  id: ID!
  newEntryFee: BigInt!
  newExitFee: BigInt!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type UpdateManagementFee @entity(immutable: true) {
  id: ID!
  newManagementFee: BigInt!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type UpdatePerformanceFee @entity(immutable: true) {
  id: ID!
  newPerformanceFee: BigInt!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type UpdateEntryAndExitFee @entity(immutable: true) {
  id: ID!
  newEntryFee: BigInt!
  newExitFee: BigInt!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type DeleteProposedManagementFee @entity(immutable: true) {
  id: ID!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type DeleteProposedPerformanceFee @entity(immutable: true) {
  id: ID!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type DeleteProposedEntryAndExitFee @entity(immutable: true) {
  id: ID!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

# TokenWhitelistManagement events
type TokenWhitelisted @entity(immutable: true) {
  id: ID!
  tokens: [Bytes!]!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type TokensRemovedFromWhitelist @entity(immutable: true) {
  id: ID!
  tokens: [Bytes!]!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

# TreasuryManagement events
type TreasuryUpdated @entity(immutable: true) {
  id: ID!
  newTreasury: Bytes!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

# UserWhitelistManagement events
type UserWhitelisted @entity(immutable: true) {
  id: ID!
  users: [Bytes!]!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type UserRemovedFromWhitelist @entity(immutable: true) {
  id: ID!
  users: [Bytes!]!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}
